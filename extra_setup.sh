#!/bin/bash
# Дополнительный скрипт настройки для Railway
# Этот скрипт предназначен для подготовки окружения перед запуском бота

# Выводим информацию о системе
echo "=== Дополнительная настройка для Railway ==="
echo "Дата и время: $(date)"
echo "Имя хоста: $(hostname)"
echo "Пользователь: $(whoami)"
echo "Текущая директория: $(pwd)"
echo "Содержимое директории:"
ls -la
echo "======================="

# Проверяем версии установленных компонентов
echo "=== Версии компонентов ==="
python --version
pip --version
echo "======================="

# Проверяем наличие критически важных переменных окружения
echo "=== Проверка переменных окружения ==="
if [ -n "$BOT_TOKEN" ]; then
  echo "✅ BOT_TOKEN найден"
else
  echo "❌ BOT_TOKEN отсутствует"
fi

if [ -n "$OPENAI_API_KEY" ]; then
  echo "✅ OPENAI_API_KEY найден"
else
  echo "❌ OPENAI_API_KEY отсутствует"
fi

if [ -n "$PORT" ]; then
  echo "✅ PORT = $PORT"
else
  echo "❌ PORT не установлен, используется значение по умолчанию"
  export PORT=8080
fi
echo "======================="

# Устанавливаем права на выполнение для всех Python-скриптов
echo "=== Настройка прав доступа ==="
chmod +x *.py
chmod +x *.sh
echo "Права на выполнение установлены для всех скриптов Python и Shell"
echo "======================="

# Выводим итоговую информацию
echo "=== Настройка завершена ==="
echo "Система готова к запуску бота"
echo "=======================" 