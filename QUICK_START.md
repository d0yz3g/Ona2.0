# Быстрый старт с Supabase

Это краткое руководство поможет вам быстро запустить проект ОНА с использованием Supabase в качестве базы данных.

## 1. Настройка проекта

1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/d0yz3g/Ona2.0.git
   cd Ona2.0
   ```

2. **Установите зависимости**:
   ```bash
   pip install -r requirements.txt
   ```

## 2. Настройка Supabase

1. **Создайте аккаунт и проект**:
   - Зарегистрируйтесь на [Supabase](https://supabase.com/)
   - Создайте новый проект
   - Запомните URL проекта и анонимный ключ (anon key)

2. **Создайте таблицы**:
   - Перейдите в раздел "Table Editor" в панели управления Supabase
   - Создайте необходимые таблицы с помощью SQL из файла `supabase_setup.md`
   - Вы можете скопировать SQL-код для каждой таблицы и выполнить его в "SQL Editor"

## 3. Настройка переменных окружения

1. **Создайте файл `.env`**:
   ```
   BOT_TOKEN=ваш_токен_телеграм_бота
   OPENAI_API_KEY=ваш_ключ_openai
   ELEVEN_API_KEY=ваш_ключ_elevenlabs
   ELEVENLABS_API_KEY=ваш_ключ_elevenlabs
   ELEVENLABS_VOICE_ID=ид_голоса_elevenlabs
   SUPABASE_URL=ваш_url_supabase
   SUPABASE_KEY=ваш_ключ_supabase
   ```

2. **Проверьте подключение к Supabase**:
   ```bash
   python test_supabase_connection.py
   ```

   Вы должны увидеть сообщение о успешном подключении и доступности таблиц.

## 4. Миграция данных (опционально)

Если у вас уже есть данные в SQLite, вы можете мигрировать их в Supabase:

```bash
python migrate_to_supabase.py
```

## 5. Запуск бота

```bash
python main.py
```

или с автоматическим перезапуском в случае ошибок:

```bash
python restart_bot.py
```

## 6. Проверка работы

1. Откройте бота в Telegram
2. Отправьте команду `/start`
3. Убедитесь, что бот отвечает и все функции работают

## Решение проблем

### Ошибка подключения к Supabase
- Проверьте правильность URL и ключа в файле `.env`
- Убедитесь, что таблицы созданы правильно
- Проверьте, что IP-адрес не заблокирован в настройках Supabase

### Проблемы с миграцией данных
- Убедитесь, что файл SQLite существует и доступен для чтения
- Проверьте структуру таблиц в SQLite и Supabase

### Ошибки при запуске бота
- Проверьте все переменные окружения
- Убедитесь, что все зависимости установлены
- Проверьте логи для получения дополнительной информации

## Дополнительная информация

Подробные инструкции по настройке и использованию Supabase в проекте можно найти в файле `supabase_setup.md`. 