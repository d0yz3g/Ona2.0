[phases.setup]
nixPkgs = ["python311", "gcc", "python311Packages.pip"]

[phases.install]
cmds = [
  "python -m pip install --upgrade pip",
  "pip install python-dotenv==1.0.0 httpx==0.23.3 openai==1.3.3 pydantic==2.1.1 aiogram==3.0.0",
  "pip install -r requirements.txt || echo 'Some packages could not be installed'"
]

[phases.build]
cmds = [
  "python -c \"import sys; print(f'Python version: {sys.version}')\"",
  "python -c \"import openai; print(f'OpenAI version: {openai.__version__}')\"",
  "python -c \"import sys; sys.path.insert(0, '.'); import pre_import_fix\" || echo 'Failed to import pre_import_fix (this is expected)'"
]

[start]
cmd = "python railway_final.py" 