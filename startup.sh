#!/bin/bash
# Скрипт для запуска бота на Railway

# Выводим информацию о системе
echo "=== Запуск бота на Railway через startup.sh ==="
echo "Текущая директория: $(pwd)"
echo "Содержимое директории:"
ls -la
echo "======================="

# Запускаем дополнительный скрипт настройки
if [ -f "extra_setup.sh" ]; then
  echo "Запуск дополнительного скрипта настройки..."
  chmod +x extra_setup.sh
  ./extra_setup.sh
else
  echo "Дополнительный скрипт настройки не найден, продолжаем..."
fi

# Устанавливаем права на выполнение для Python-скриптов
chmod +x *.py
echo "Права на выполнение установлены"

# Проверяем переменную PORT
if [ -z "$PORT" ]; then
  echo "Переменная PORT не установлена, устанавливаем значение по умолчанию 8080"
  export PORT=8080
else
  echo "Используется PORT=$PORT"
fi

# Запускаем бота
echo "Запуск бота..."
echo "======================="
exec python railway_final.py 